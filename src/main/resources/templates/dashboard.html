<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>Farmanwa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/foolwala/style.css}">

</head>

<body>
    <h1>Weather Dashboard</h1>
    <div id="progressBar" class="loading">
        <div class="progress"></div>
    </div>

    <br>
    <br>
    <br>
    <br>

    <div class="container">
        <div class="weather-input">
            <form th:action="@{/getweather}" method="post">
                <h3>Enter a City Name</h3>
                <input class="city-input" type="text" name="cityName" placeholder="E.g., New York, London, Tokyo"
                    th:value="${cityName}">
                <input type="submit" class="search-btn" value="Search">
                <div class="separator"></div>
            </form>
            <button class="location-btn" onclick="getLocation()">Use Current Location</button>
            <form action="/getweatherwithlocation" id="locationForm" method="post">
                <input type="hidden" id="latitude" name="latitude">
                <input type="hidden" id="longitude" name="longitude">
            </form>
        </div>
        <div class="weather-data">
            <div class="current-weather">
                <div class="details">
                    <h2><span th:text="${#strings.capitalize(cityName)}"></span> üèôÔ∏è</h2>
                    <h2><span th:text="${date}"></span></h2>
                    <h6>Temperature: <span th:text="${temp}"></span>¬∞C</h6>
                    <h6 style="margin-bottom: 20px;">Country: <span th:text="${country}"></span></h6>
                    <div class="sunny" style="position: sticky;">
                        <img src="https://cdn2.iconfinder.com/data/icons/weather-flat-14/64/weather02-512.png"
                            alt="seed" style="width: 100px; height: auto; position: absolute; top: 50; right: 0;">
                    </div>
                    <h6>Wind: <span th:text="${windSpeed}"></span> M/S</h6>
                    <h6>Humidity: <span th:text="${humidity}"></span>%</h6>
                    <h6>Cloud Condition: <span th:text="${cloudCondition}"></span></h6>
                </div>
            </div>
        </div>
    </div>

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <footer>
        <p>&copy; 2024 Farman Shahi ‚ô•  All rights reserved.</p>
        <p>
            <a href="https://github.com/Momoeka" target="_blank">GitHub üåê</a> |
            <a href="https://www.linkedin.com/in/sayed-mohammad-firdousi-7895951a7/?originalSubdomain=in"
                target="_blank">LinkedIn üíº</a>
        </p>
    </footer>

    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            document.getElementById("latitude").value = position.coords.latitude;
            document.getElementById("longitude").value = position.coords.longitude;
            document.getElementById("locationForm").submit();
        }
    </script>

</body>

</html>